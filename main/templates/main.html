{% extends 'base.html' %}
{% load static %}
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">


{% block content %}
<nav class="navbar navbar-expand-lg navbar-light bg-light">
    <div class="container">
        <!-- Logo di sebelah kiri -->
        <a class="navbar-brand" href="#">
            <img src="{% static 'weblogo.png' %}" width="50" height="50" class="d-inline-block align-top" alt="Logo">
            Goodang
        </a>

        <!-- Tombol Logout di sebelah kanan -->
        <a href="{% url 'main:logout' %}">
            <button class="btn btn-outline-success me-2" type="button">Logout</button>  
        </a>
        
    </div>
</nav>

<div class="container mt-5">
    <h1>Goodang Page</h1>

    <div class="row">
        <div class="col-md-6">
            <h5>Name:</h5>
            <p>{{ name }}</p>

            <h5>Class:</h5>
            <p>{{ class }}</p>

            <div class="item-count">
                <p>Total of Items: {{ items|length }}</p>
            </div>
            <a href="{% url 'main:create_item' %}" class="btn btn-primary">Add New Item</a>
        </div>
    </div>

    <table class="table table-hover mt-3">
        <thead>
            <tr>
                <th scope="col">Owner</th>
                <th scope="col">Item Name</th>
                <th scope="col">Category</th>
                <th scope="col">Amount</th>
                <th scope="col">Price</th>
                <th scope="col">Description</th>
                <th scope="col">Date Added</th>
                
            </tr>
        </thead>
        <tbody>
            {% for item in items %}
                <tr {% if forloop.last %} class="table-warning"{% endif %}>
                    <td>{{ item.owner }}</td>
                    <td>{{ item.item_name }}</td>
                    <td>{{ item.category }}</td>
                    <td>{{ item.amount }}</td>
                    <td>{{ item.price }}</td>
                    <td>{{ item.description }}</td>
                    <td>{{ item.date_added }}</td>
                    <td>
                        <form method="POST" action="{% url 'main:add_items' item.id %}">
                            {% csrf_token %}
                            <button type="submit" class="btn btn-primary btn-sm">Add</button>
                        </form>
                    </td>
                    <td>
                        <form method="POST" action="{% url 'main:sub_items' item.id %}">
                            {% csrf_token %}
                            <button type="submit" class="btn btn-primary btn-sm">Dec</button>
                        </form>
                    </td>
                    <td>
                        <form method="POST" action="{% url 'main:remove_items' item.id %}">
                            {% csrf_token %}
                            <button type="submit" class="btn btn-danger btn-sm">Delete</button>
                        </form>
                    </td>
                    <td>
                        <a href="{% url 'main:edit_item' item.pk %}" class="btn btn-secondary btn-sm">Edit</a>
                    </td>
                </tr>
            {% endfor %}
        </tbody>
    </table>
    <h5 class="mt-3" style="font-size: 14px;">Sesi terakhir login: {{ last_login }}</h5>

</div>
{% endblock content %}
